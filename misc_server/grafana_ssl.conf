<VirtualHost *:443>
    ServerName 131.173.65.76

    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/selfsigned.crt
    SSLCertificateKeyFile /etc/ssl/private/selfsigned.key

    # Proxy settings for Grafana
    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/

    # Adjust these headers as needed for your setup
    ProxyPreserveHost On
    RequestHeader set X-Forwarded-Proto "https"
    RequestHeader set X-Forwarded-Port "443"

    # Log files for debugging
    ErrorLog ${APACHE_LOG_DIR}/grafana_error.log
    CustomLog ${APACHE_LOG_DIR}/grafana_access.log combined
</VirtualHost>

